<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Logging · simpleS</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="&lt;p&gt;&lt;code&gt;simpleS&lt;/code&gt; allows logging information in a fully configurable way.&lt;/p&gt;
"/><meta name="docsearch:language" content="en"/><meta property="og:title" content="Logging · simpleS"/><meta property="og:type" content="website"/><meta property="og:url" content="https://micnic.github.io/simplesindex.html"/><meta property="og:description" content="&lt;p&gt;&lt;code&gt;simpleS&lt;/code&gt; allows logging information in a fully configurable way.&lt;/p&gt;
"/><meta property="og:image" content="https://micnic.github.io/simples/img/logo.svg"/><meta name="twitter:card" content="summary"/><meta name="twitter:image" content="https://micnic.github.io/simples/img/logo.svg"/><link rel="shortcut icon" href="/simplesimg/favicon.png"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/foundation.min.css"/><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><link rel="stylesheet" href="/simplescss/main.css"/></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/simples"><img class="logo" src="/simplesimg/logo-white.svg" alt="simpleS"/></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class="siteNavGroupActive"><a href="/simplesdocs/" target="_self">Docs</a></li><li class=""><a href="https://npmjs.org/package/simples" target="_self">npm</a></li><li class=""><a href="https://github.com/micnic/simpleS" target="_self">GitHub</a></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="container docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><i></i></div><h2><i>›</i><span>Reference</span></h2><div class="tocToggler" id="tocToggler"><i class="icon-toc"></i></div></div><div class="navGroups"><div class="navGroup"><h3 class="navGroupCategoryTitle">Docs</h3><ul><li class="navListItem"><a class="navItem" href="/simplesdocs/">Index</a></li><li class="navListItem"><a class="navItem" href="/simplesdocs/start">Get Started</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Reference</h3><ul><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">General</h4><ul><li class="navListItem"><a class="navItem" href="/simplesdocs/server">Server</a></li><li class="navListItem"><a class="navItem" href="/simplesdocs/mirror">Mirror</a></li><li class="navListItem"><a class="navItem" href="/simplesdocs/store">Store</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">HTTP</h4><ul><li class="navListItem"><a class="navItem" href="/simplesdocs/http-host">HTTPHost</a></li><li class="navListItem"><a class="navItem" href="/simplesdocs/router">Router</a></li><li class="navListItem"><a class="navItem" href="/simplesdocs/http-connection">HTTPConnection</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">WS</h4><ul><li class="navListItem"><a class="navItem" href="/simplesdocs/ws-host">WSHost</a></li><li class="navListItem"><a class="navItem" href="/simplesdocs/ws-channel">WSChannel</a></li><li class="navListItem"><a class="navItem" href="/simplesdocs/ws-connection">WSConnection</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Client</h4><ul><li class="navListItem"><a class="navItem" href="/simplesdocs/client">Client</a></li><li class="navListItem"><a class="navItem" href="/simplesdocs/client-request">ClientRequest</a></li><li class="navListItem"><a class="navItem" href="/simplesdocs/client-connection">ClientConnection</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Info</h4><ul><li class="navListItem navListItemActive"><a class="navItem" href="/simplesdocs/logging">Logging</a></li></ul></div></ul></div></div></section></div><script>
            document.addEventListener('DOMContentLoaded', function() {
              createToggler('#navToggler', '#docsNav', 'docsSliderActive');
              createToggler('#tocToggler', 'body', 'tocActive');

              const headings = document.querySelector('.toc-headings');
              headings && headings.addEventListener('click', function(event) {
                if (event.target.tagName === 'A') {
                  document.body.classList.remove('tocActive');
                }
              }, false);

              function createToggler(togglerSelector, targetSelector, className) {
                var toggler = document.querySelector(togglerSelector);
                var target = document.querySelector(targetSelector);

                if (!toggler) {
                  return;
                }

                toggler.onclick = function(event) {
                  event.preventDefault();

                  target.classList.toggle(className);
                };
              }
            });
        </script></nav></div><div class="container mainContainer"><div class="wrapper"><div class="post"><header class="postHeader"><h1 class="postHeaderTitle">Logging</h1></header><article><div><span><p><code>simpleS</code> allows logging information in a fully configurable way.</p>
<p>Both HTTP and WS connections have the <code>.log()</code> method for logging data, moreover
routers have a special configuration for logging in a more global way. There are
3 entities used in logging: <code>tokens</code>, <code>format</code> and <code>logger function</code>. The tokens
are special string shortcuts to some available information about the current
connection, there are default tokens, connection or time related, but any
custom tokens can be defined. The format represents a string containing some
tokens to define the structure of the logs, if no format is provided then a
default format is being used. The logger function is a function that will
consume the output log, if none is provided then <code>console.log</code> is called with
the created output.</p>
<h2><a class="anchor" aria-hidden="true" id="default-format"></a><a href="#default-format" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Default Format</h2>
<p>If no format is provided then the default format is used for both, HTTP and WS
protocols.</p>
<p>HTTP: <code>%short-date %time %method %href</code></p>
<p>WS: <code>%short-date %time %protocol %href</code></p>
<h2><a class="anchor" aria-hidden="true" id="default-tokens"></a><a href="#default-tokens" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Default Tokens</h2>
<p>By default <code>simpleS</code> provides a set of tokens to be used when logging data.</p>
<h3><a class="anchor" aria-hidden="true" id="connection-related-tokens"></a><a href="#connection-related-tokens" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Connection Related Tokens</h3>
<h4><a class="anchor" aria-hidden="true" id="common-connection-tokens"></a><a href="#common-connection-tokens" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Common Connection Tokens</h4>
<ul>
<li><code>%protocol</code> - insert the protocol used by the connection (<code>http(s)</code> or
<code>ws(s)</code>)</li>
<li><code>%host</code> - insert the url host of the request</li>
<li><code>%hostname</code> - insert the url hostname of the request</li>
<li><code>%href</code> - insert the full url of the request</li>
<li><code>%path</code> - insert the pathname of the request</li>
<li><code>%ip</code> - insert the remote ip address</li>
</ul>
<h4><a class="anchor" aria-hidden="true" id="http-connection-tokens"></a><a href="#http-connection-tokens" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>HTTP Connection Tokens</h4>
<ul>
<li><code>%req[HEADER]</code> - insert the value of a request header</li>
<li><code>%res[HEADER]</code> - insert the value of a response header</li>
<li><code>%method</code> - insert the method of the request</li>
<li><code>%status</code> - insert the status code of the response</li>
<li><code>%lang</code> - insert the defined <code>Content-Language</code> header for the response</li>
<li><code>%type</code> - insert the defined <code>Content-Type</code> header for the response</li>
</ul>
<h3><a class="anchor" aria-hidden="true" id="time-related-tokens"></a><a href="#time-related-tokens" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Time Related Tokens</h3>
<ul>
<li><code>%date</code> - insert the string representing current date</li>
<li><code>%short-date</code> - insert the current date in the format <code>dd.mm.yyyy</code></li>
<li><code>%time</code> - insert the current time in the format <code>hh:mm:ss</code></li>
<li><code>%short-time</code> - insert the current time in the format <code>hh:mm</code></li>
<li><code>%timestamp</code> - insert the UNIX time value</li>
<li><code>%year</code> - insert the current year as a 4 digit number</li>
<li><code>%month</code> - insert the current month of the year as a 2 digit number</li>
<li><code>%day</code> - insert the current day of the month as a 2 digit number</li>
<li><code>%hour</code> - insert the current hour of the day as a 2 digit number</li>
<li><code>%minute</code> - insert the current minute of the hour as a 2 digit number</li>
<li><code>%second</code> - insert the current second of the minute as 2 digit number</li>
</ul>
<h2><a class="anchor" aria-hidden="true" id="token-definition"></a><a href="#token-definition" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Token Definition</h2>
<p>To define tokens in addition to default tokens an object with functions should
be provided to connection <code>.log()</code> method or in router logger configuration
options, these functions will receive the current connection, get any
information from it and should return a string as a replacement.</p>
<pre><code class="hljs css language-js">{
    <span class="hljs-string">'custom-token'</span>: <span class="hljs-function">(<span class="hljs-params">connection</span>) =&gt;</span> {

        <span class="hljs-keyword">return</span> <span class="hljs-string">'custom-token-replacement'</span>;
    }
}
</code></pre>
</span></div></article></div><div class="docs-prevnext"><a class="docs-prev button" href="/simplesdocs/client-connection"><span class="arrow-prev">← </span><span class="function-name-prevnext">ClientConnection</span></a></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#default-format">Default Format</a></li><li><a href="#default-tokens">Default Tokens</a><ul class="toc-headings"><li><a href="#connection-related-tokens">Connection Related Tokens</a></li><li><a href="#time-related-tokens">Time Related Tokens</a></li></ul></li><li><a href="#token-definition">Token Definition</a></li></ul></nav></div><footer class="nav-footer" id="footer"><section class="sitemap"><a href="/simples" class="nav-home"><img src="/simplesimg/logo-square.svg" alt="simpleS" width="66" height="58"/></a><div><h5>Docs</h5><a href="/simplesdocs/en/index">Index</a><a href="/simplesdocs/en/start">Get Started</a></div><div><h5>More</h5><a href="https://npmjs.org/package/simples">npm</a><a href="https://github.com/micnic/simpleS">GitHub</a><a class="github-button" href="https://github.com/micnic/simples" data-icon="octicon-star" data-count-href="/micnic/simples/stargazers" data-show-count="true" data-count-aria-label="# stargazers on GitHub" aria-label="Star this project on GitHub">Star</a></div></section><section class="copyright">Copyright © 2012 - 2019 Nicu Micleușanu</section></footer></div></body></html>